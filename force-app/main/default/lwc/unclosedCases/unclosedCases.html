<template>
    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading..."></lightning-spinner>
    </template>

    <template if:true={cases}>
        <lightning-card title="Open Cases" icon-name="standard:case">
            <div class="slds-p-around_medium">
                <template if:true={cases.length}>
                    <template for:each={cases} for:item="caseRecord">
                        <div key={caseRecord.Id} class="slds-box slds-m-bottom_small slds-grid slds-grid_align-spread">
                            <div>
                                <p><strong>Case #: </strong>{caseRecord.CaseNumber}</p>
                                <p><strong>Subject: </strong>{caseRecord.Subject}</p>
                                <p><strong>Status: </strong>{caseRecord.Status}</p>
                            </div>
                            <div class="slds-m-left_medium">
                                <lightning-button 
                                    label="Close" 
                                    variant="brand" 
                                    data-id={caseRecord.Id}
                                    onclick={handleClose}>
                                </lightning-button>
                            </div>
                        </div>
                    </template>
                </template>
                <template if:false={cases.length}>
                    <p>No open cases found.</p>
                </template>
            </div>
        </lightning-card>
    </template>
</template>
